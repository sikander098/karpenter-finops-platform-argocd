opentelemetry-demo:
  components:
    # --- FIX FOR PROMETHEUS CRASH (OOMKilled) ---
    prometheus:
      resources:
        limits:
          memory: "2Gi"  # Increase limit to 2GB
        requests:
          memory: "500Mi"

    # --- SPOT INSTANCE RULES (Previous Config) ---
    loadGenerator:
      schedulingRules:
        nodeSelector:
          karpenter.sh/capacity-type: spot
      resources:
        limits:
          memory: 1Gi
        requests:
          cpu: 500m
          memory: 500Mi

    frontend:
      schedulingRules:
        nodeSelector:
          karpenter.sh/capacity-type: spot

    checkoutService:
      schedulingRules:
        nodeSelector:
          karpenter.sh/capacity-type: spot

    adService:
      schedulingRules:
        nodeSelector:
          karpenter.sh/capacity-type: spot
